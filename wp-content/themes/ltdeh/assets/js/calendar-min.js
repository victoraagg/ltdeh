document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("calendar"),t=new FullCalendar.Calendar(e,{header:{left:"",center:"title",right:"prev,next"},plugins:["dayGrid","interaction"],eventClick:function(e,t,a){alert(e.event._def.title)},events:wp_ajax_calendar.all_books});t.setOption("locale","es"),t.setOption("firstDay",1),t.render()}),jQuery("#book-success").hide(),jQuery("#book-error").hide(),jQuery("#aditional-info").hide(),jQuery("#event-calendar").on("change",function(e){switch(jQuery(this).val()){case"Pabellón Multiusos":jQuery("#aditional-info").hide();break;case"Claustro - El Convento":case"Salón de Actos - El Convento":jQuery("#aditional-info").show();break;case"Pabellón Polideportivo":jQuery("#aditional-info").hide();break;case"Casa de la Juventud":jQuery("#aditional-info").show();break;case"Pista Pádel 1":case"Pista Pádel 2":jQuery("#aditional-info").hide();break;case"Hogar del Jubilado":case"Hogar del Jubilado - Aula de informática":jQuery("#aditional-info").show()}}),jQuery("#create-event").on("click",function(e){e.preventDefault();var t,a=/^([\s]{0,}[^\s]{1,}[\s]{0,}){1,}$/,n=0;if(a.test(jQuery("#event-title").val())||(n=1),a.test(jQuery("#event-mail").val())||(n=1),a.test(jQuery("#event-phone").val())||(n=1),a.test(jQuery("#event-day").val())||(n=1),a.test(jQuery("#event-month").val())||(n=1),a.test(jQuery("#event-start-time").val())||(n=1),a.test(jQuery("#event-duration").val())||(n=1),a.test(jQuery("#event-calendar").val())||(n=1),1==n)return!1;t={title:jQuery("#event-title").val(),mail:jQuery("#event-mail").val(),phone:jQuery("#event-phone").val(),dni:jQuery("#event-dni").val(),representation:jQuery("#event-representation").val(),activity:jQuery("#event-activity").val(),event_time:{day:jQuery("#event-day").val(),month:jQuery("#event-month").val(),start_time:jQuery("#event-start-time").val(),duration:jQuery("#event-duration").val()},calendar:jQuery("#event-calendar").val()},jQuery.ajax({type:"POST",url:wp_ajax_calendar.ajaxurl,data:{action:"create_book",event_details:t},dataType:"json",success:function(e){"Error"==e.message?(jQuery("#book-success").hide(),jQuery("#book-error").hide(),jQuery("#book-error").show().text("No hay disponibilidad en ese horario")):(jQuery("#book-success").hide(),jQuery("#book-error").hide(),jQuery("#book-success").show().text("Reserva: "+e.message+" creada correctamente. Confirmaremos tu reserva en el email indicado.")),document.getElementById("form-book").reset(),window.scrollTo(0,0)}})});