function AdjustMinTime(e){var t=new Date,a=t.getDate(),r=t.getMonth()+1,i=t.getFullYear()+"-"+(r<10?"0"+r:r)+"-"+(a<10?"0"+a:a);e.dateFormat("Y-m-d")==i?this.setOptions({minTime:0}):this.setOptions({minTime:!1})}jQuery("#book-success").hide(),jQuery("#book-error").hide(),jQuery("#event-start-time").datetimepicker({lazyInit:!0,format:"Y-m-d H:i",minDate:0,minTime:"08:00",maxTime:"23:00",step:30,dayOfWeekStart:1,lang:"es",onShow:AdjustMinTime,onSelectDate:AdjustMinTime}),jQuery("#create-event").on("click",function(e){e.preventDefault();var t,a=/^([\s]{0,}[^\s]{1,}[\s]{0,}){1,}$/,r=0;if(a.test(jQuery("#event-title").val())||(r=1),a.test(jQuery("#event-mail").val())||(r=1),a.test(jQuery("#event-phone").val())||(r=1),a.test(jQuery("#event-calendar").val())||(r=1),a.test(jQuery("#event-start-time").val())||(r=1),1==r)return!1;var i=jQuery("#event-start-time").val().split(" "),n=i[1].split(":"),s=parseInt(n[0])+parseInt(jQuery("#event-duration").val()),o=i[0]+" "+s+":"+n[1];t={title:jQuery("#event-title").val(),mail:jQuery("#event-mail").val(),phone:jQuery("#event-phone").val(),event_time:{start_time:jQuery("#event-start-time").val().replace(" ","T")+":00",end_time:o.replace(" ","T")+":00"},calendar:jQuery("#event-calendar").val()},jQuery.ajax({type:"POST",url:wp_ajax_calendar.ajaxurl,data:{action:"create_book",event_details:t},dataType:"json",success:function(e){"Error"==e.message?(jQuery("#book-success").hide(),jQuery("#book-error").hide(),jQuery("#book-error").show().text("No hay disponibilidad en ese horario")):(jQuery("#book-success").hide(),jQuery("#book-error").hide(),jQuery("#book-success").show().text("Reserva: "+e.message+" creada correctamente. Confirmaremos tu reserva en el email indicado."))}})});